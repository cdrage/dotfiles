#!/bin/bash

dcleanup(){
  docker rm $(docker ps --filter status=exited -q 2>/dev/null) 2>/dev/null
  docker rmi $(docker images --filter dangling=true -q 2>/dev/null) 2>/dev/null
}


relies_on(){
  local containers=$@

  for container in $containers; do
    local state=$(docker inspect --format "{{.State.Running}}" $container 2>/dev/null)

    if [[ "$state" == "false" ]] || [[ "$state" == "" ]]; then
      echo "$container is not running, starting it for you."
      $container
    fi
  done
}

del_stopped(){
  name=$1
  state=$(docker inspect --format "{{.State.Running}}" $name 2>/dev/null)
  if [[ "$state" == "false" ]]; then
  docker rm $name
  fi
}

# Functions

mutt(){
  docker run -it --rm \
    -e TERM=xterm-256color \
    -e MUTT \
    -e MUTT_NAME \
    -e MUTT_PASS \
    -e MUTT_FROM \
    -e MUTT_SMTP \
    -e MUTT_IMAP \
    -v $HOME/.gnupg:/home/user/.gnupg \
    -v $HOME/docker_files/mutt_files/:/home/user/files \
    -v $HOME/docker_files/mutt_downloads/:/home/user/downloads \
    -v $HOME/dropbox/etc/aliases.txt:/home/user/.mutt/aliases.txt \
    -v /etc/localtime:/etc/localtime:ro \
    charliedrage/mutt
}


weechat(){
  docker run -it -d \
    -e TERM=xterm-256color \
    -v $HOME/.weechat:/root/.weechat \
    -v /etc/localtime:/etc/localtime:ro \
    --name weechat \
    charliedrage/weechat
  docker attach weechat
}

glances(){
  docker run --rm -it -e TERM=xterm-256color --pid=host --ipc=host --net=host --privileged charliedrage/glances
}

jrl(){
  docker run -it --rm -v $HOME/dropbox/txt/txt.aes:/txt.aes jrl
}
